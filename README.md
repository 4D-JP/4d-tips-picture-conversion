# 4d-tips-picture-conversion

PICTピクチャの変換ツール

### 概要

本来，``PICT``画像の変換は一括処理ではなく，個別に対応することが望ましいと考えられてます。``PICT``形式には，ドロー画像とペイント画像の両方が含まれ，また透明色の対応をどうするかなど，画像ごとに変換方法を決定するべきだからです。

``PICT_Convert by JPR``は，視覚的なツールであり，画像を確認しながらマニュアル作業で変更を進められるように作られています。

### [PICT_Convert by JPR](https://github.com/4D-JP/4d-tips-picture-conversion/releases/tag/1.0)

<img width="918" alt="2018-03-29 11 58 37" src="https://user-images.githubusercontent.com/10509075/38067652-896ffb64-3348-11e8-9804-3ef7548653cf.png">

### 使い方

古い形式（``QuickDraw (PICT)``）ライブラリピクチャ・ピクチャリソース・スタティックピクチャの変換を支援するツールです。

``Components``フォルダーにインストールし，32ビット版でストラクチャを開いて，``HTP_DoIt``メソッドを実行します。詳細はPDFドキュメント（英文）を参照してください。

---

こちらは，大雑把な一括変換プログラムです（上記ツールとは無関係）。``QuickDraw (PICT)``だけでなく，``QuickTime``画像にも対応しています（v2004以前の``JPEG``コンテナなど）。

### 使い方

[変換SOAPサーバー](https://github.com/4D-JP/4d-tips-picture-conversion/releases/tag/1.2)を32ビット版で起動します。デフォルトの設定はポート番号``80``です。

[変換SOAPクライアント](https://github.com/4D-JP/4d-tips-picture-conversion/releases/tag/1.1)を起動します。リソースピクチャを使用していないのであれば，64ビット版でもOKです。リソースピクチャ（``RSR``ファイル）を使用している場合は32ビットで起動してください。

``FixIt``メソッドを実行すると，変換メソッドがインストールされます（コンポーネントではありません）。デフォルトのURLは``http://localhost/4DSOAP``です。

フォームのピクチャを一括修正するには``FIX_FORM``，ライブラリを一括修正するには``FIX_LIBRARY``を実行します。

ペーストされたスタティックピクチャーを変換することはできませんが，フォームエディターで「スタティックピクチャー」を適当に選択し，「タイプ」プロパティを「スタティックピクチャー」から「ライブラリピクチャー」に変更すれば，画像がピクチャライブラリに追加されますので，``FIX_LIBRARY``で修正することができます。

リソースファイルを変換した場合，フォームエディターでソースを「リソースファイル」から「ピクチャライブラリ」に変更してください。

``PICT``ファイルを変換した場合は，ストラクチャを再起動する必要があります。

### 変換表

| 元画像 | 元画像 | 変換 |
| --- | --- | --- |
| ピクチャボタン | リソース | ``PNG``に変換してを同名の項目をピクチャライブラリに追加 |
| ピクチャボタン | ファイル | ファイル名そのまま``PNG``に変換（Macは拡張子が``pict``でも，ファイルヘッダーで``PNG``と特定できる） |
| ピクチャボタン | ピクチャライブラリ | ``PNG``に変換 |
| 3Dボタン | リソース | ``PNG``に変換してを同名の項目をピクチャライブラリに追加 |
| 3Dボタン | ファイル | ファイル名そのまま``PNG``に変換（Macは拡張子が``pict``でも，ファイルヘッダーで``PNG``と特定できる） |
| 3Dボタン | ピクチャライブラリ | ``PNG``に変換 |
| スタティックピクチャ | ペースト | 無処理 |
| スタティックピクチャ | ファイル | ファイル名そのまま``PNG``に変換（Macは拡張子が``pict``でも，ファイルヘッダーで``PNG``と特定できる） |
| スタティックピクチャ | ピクチャライブラリ | ``PNG``に変換 |

リソース画像の読み込みには32ビット版が必要

ファイルを上書きした場合はストラクチャの再起動が必要（``Resources``ピクチャはキャッシュされているため）
